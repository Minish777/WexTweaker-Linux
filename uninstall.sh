#!/bin/bash
# WexTweaks Linux - –°–∫—Ä–∏–ø—Ç —É–¥–∞–ª–µ–Ω–∏—è

set -e

# –¶–≤–µ—Ç–∞
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m'

echo -e "${YELLOW}‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó${NC}"
echo -e "${YELLOW}‚ïë           –£–î–ê–õ–ï–ù–ò–ï WEXTWEAKS LINUX              ‚ïë${NC}"
echo -e "${YELLOW}‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù${NC}"
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
if [ ! -d "/opt/wextweaks" ]; then
    echo -e "${RED}WexTweaks –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ —Å–∏—Å—Ç–µ–º–µ!${NC}"
    exit 1
fi

echo -e "${YELLOW}–ß—Ç–æ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ:${NC}"
echo "  1. –ì–ª–æ–±–∞–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ 'wextweaks'"
echo "  2. –Ø—Ä–ª—ã–∫ –≤ –º–µ–Ω—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π"
echo "  3. –°–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞"
echo "  4. –§–∞–π–ª—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)"
echo "  5. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)"
echo ""

read -p "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ? (y/N): " -n 1 -r
echo ""
if [[ ! $REPLY =~ ^[Yy]$ ]]; then
    echo -e "${GREEN}–£–¥–∞–ª–µ–Ω–∏–µ –æ—Ç–º–µ–Ω–µ–Ω–æ.${NC}"
    exit 0
fi

# –£–¥–∞–ª—è–µ–º —Å–∏–º–ª–∏–Ω–∫
echo "–£–¥–∞–ª–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã..."
sudo rm -f /usr/local/bin/wextweaks 2>/dev/null || true

# –£–¥–∞–ª—è–µ–º .desktop —Ñ–∞–π–ª
echo "–£–¥–∞–ª–µ–Ω–∏–µ —è—Ä–ª—ã–∫–∞ –º–µ–Ω—é..."
rm -f "$HOME/.local/share/applications/wextweaks.desktop" 2>/dev/null || true

# –£–¥–∞–ª—è–µ–º —Å–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞
echo "–£–¥–∞–ª–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ –∑–∞–ø—É—Å–∫–∞..."
rm -f "$HOME/.local/bin/wextweaks-user" 2>/dev/null || true
rm -f "$HOME/.local/bin/wextweaks-launcher" 2>/dev/null || true

# –û–±–Ω–æ–≤–ª—è–µ–º –∫—ç—à .desktop —Ñ–∞–π–ª–æ–≤
if command -v update-desktop-database &> /dev/null; then
    update-desktop-database "$HOME/.local/share/applications" 2>/dev/null || true
fi

# –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
read -p "–£–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (~/.config/wextweaks)? (y/N): " -n 1 -r
echo ""
if [[ $REPLY =~ ^[Yy]$ ]]; then
    echo "–£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π..."
    rm -rf "$HOME/.config/wextweaks" 2>/dev/null || true
fi

# –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã
read -p "–£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏–∑ /opt/wextweaks? (y/N): " -n 1 -r
echo ""
if [[ $REPLY =~ ^[Yy]$ ]]; then
    echo "–£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º—ã..."
    sudo rm -rf /opt/wextweaks 2>/dev/null || true
fi

echo ""
echo -e "${GREEN}‚úÖ WexTweaks —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω!${NC}"
echo -e "${YELLOW}üí° –°–æ–≤–µ—Ç: –ú–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è.${NC}"